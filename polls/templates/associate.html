<!DOCTYPE html>
<html>

{% include "header.html" %}

<body>
    <div class="container">
        {% include "navmenu.html" %}
        <div class="row">
          <div class="col-sm-6">
                <table id="mentor-list" class="table table-striped table-bordered" style="width:100%">
                        <thead>
                            <tr>
                            	<th>Mentor Id</th>
                                <th>Mentor Name</th>
                            </tr>
                        </thead>
                        <tbody>
                        	{% if mentor_list %}
                        		{% for m in mentor_list %}
    		                        <tr>
    		                        	<td>{{ m.mentor_id }} </td>
    		                            <td>{{ m.firstname }} {{ m.lastname }} </td>
    		                        </tr>
                            	{% endfor %}
                            {% else %}
                            	<tr colspan="2">
    	                            <td><p>No mentor are available.</p></td>
    	                        </tr>
    						{% endif %}
                        </tbody>
                </table>
            </div>

          <div class="col-sm-6">

                <table id="mentee-list" class="table table-striped table-bordered" style="width:100%">
                        <thead>
                            <tr>
                            	<th>Mentee Id</th>
                                <th>Mentee Name</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% if mentee_list %}
                        		{% for m in mentee_list %}
    		                        <tr>
    		                        	<td>{{ m.mentee_id }} </td>
    		                            <td>{{ m.firstname }} {{ m.lastname }} </td>
    		                        </tr>
                            	{% endfor %}
                            {% else %}
                            	<tr colspan="2">
    	                            <td><p>No mentee are available.</p></td>
    	                        </tr>
    						{% endif %}
                        </tbody>
                </table>
            </div>
        </div>

        <div class="row">
            <div class="col text-center">
                <button type="button" onclick="setGetParameter()" class="btn btn-primary btn-lg">Associate</button>
            </div>
        </div>
    </div>
</body>


{% include "commonJS.html" %}

<script type="text/javascript">
    $(document).ready(function() {
        $('#mentor-list').DataTable( {
            select: {
                style: 'single'
            }
        } );

        $('#mentee-list').DataTable( {
            select: {
                style: 'single'
            }
        } );

        $('#associate').addClass('active');
	} );

	function setGetParameter(){
	    var search_word = $("#search").val();
	    $.ajax({
	      type: "POST",
	      url: '/polls/associate',
	      data: {mentor_id: $('#mentor-list').DataTable().rows({ selected: true }).data()[0][0],
	      		mentee_id: $('#mentee-list').DataTable().rows({ selected: true }).data()[0][0]},
	      success: function(result){
	        alert("Success");
	        $('#mentor-list').DataTable().row('.selected').remove().draw();
            $('#mentee-list').DataTable().row('.selected').remove().draw();
	      }
	    });
	}
</script>

</html>